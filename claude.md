# cc memory bank

与用户对话时默认使用中文。

## 核心理念

- memory bank 中心化：项目中动态维护更新 memory bank 文件夹中的文件，每次项目开始时必须通过阅读 memory bank 对于项目有全局的理解。项目进展的过程中也要时刻更新状态到 memory bank 中。除非用户主动要求，**永远不**在项目文件中撰写报告、总结等文档。
- 凝练性：memory bank 的原则是用最凝练的语言，不重不漏的留存项目现有状态的全局信息。
- 客观性：所有的记录必须客观且遵守规定。具体来说：
- 杜绝虚假指标：绝不生成覆盖率、评级、预计时间、完成度等数值
- 杜绝夸夸其词：避免"优秀"、"完美"、"卓越"等主观评价
- 杜绝路由依赖：不依赖类似于 docs-overview.md 进行文件发现
- 模块化：无论是新项目的设计与已有项目的进一步开发，主动用清晰的模块来解耦项目，memory bank 中清晰的体现。
- token 节省：尽可能的节省主窗口的 token 数，主要方法是尽可能多的使用 task 工具。对于思考、测试、具体编写，请都创建 task 实例。

## memory bank

### 简介

Memory Bank 将项目知识划分为三层存储，每层侧重不同类型文档：

- **Foundation（基础层）** ：存放项目稳定的核心文档和知识沉淀，通常每种文档仅一份。例如项目愿景、架构设计、技术规范、编码标准等。这些文档变更频率低，是团队共识的基础信息，保证在各阶段都有权威参考资料。
- **Context（上下文层）** ：存放项目的动态上下文信息，随开发进展持续更新。例如阶段状态记录 (`stage.md`)、当前焦点 (`focus.md`)、待办事项 (`todo.md`)、决策记录 (`decisions.md`)、活动日志 (`activity.log`)、任务执行记录 (`tasks.log`) 等。这些文档反映了项目的实时状态和过程数据，使团队对当前进度与问题有完整的上下文认知。很多上下文层文档由工具自动生成更新（如日志），保持对实际活动的**持久记录**。
- **Components（组件层）** ：存放各模块/组件的详细文档，每个组件对应独立文件。采用模板驱动机制生成，例如 `module-*.md` 记录模块设计与实现细节，`api-*.md` 记录接口说明，`test-*.md` 记录模块测试说明等。组件层文档按需创建和维护，保证模块化开发时每个模块都有配套的文档，从而降低模块耦合度和知识遗失风险。
- 此外，Memory Bank 还包含**自动生成文档**，如前述 `activity.log`、`tasks.log` 等，通过监听事件实时记录关键信息。固定文档、模板文档、自动文档三种类型相结合，使得知识库既有稳定核心，又能随着项目演进自动扩展。

### 动态阶段适配

根据项目自主分析所处生命周期阶段调整文档结构和内容侧重。具体而言：

- **概念/探索阶段** ：侧重捕捉创意和调研信息。此阶段 Memory Bank 基础层保留项目愿景、市场调研等文档，上下文层提供灵感记录 (`ideas.md`)、可行性分析 (`feasibility.md`)、灵感日志等，用最小的结构记录大量想法。这样解决了传统开发中设计缺失的问题——即使在探索阶段，所有思路都有记录可追溯。
- **规划/设计阶段** ：引入需求分析和架构设计文档。Memory Bank 增加 `requirements.md`、`architecture.md`、`tech-stack.md` 等基础文档，详细记录需求细节和系统设计方案；上下文层则跟踪决策过程 (`decisions.md`)、规划笔记和原型验证结果。这保证了设计阶段的输出（需求与设计方案）被完整保存，团队对系统设计意图有共识参考。
- **开发/实现阶段** ：全面扩充文档以支撑代码编写和协作。基础层包含编码规范 (`coding-standards.md`)、开发指南等**不会频繁变更**的指导性文档。上下文层开始记录开发过程中的动态信息：任务日志 (`tasks.log`) 记录每日任务执行、实现笔记 (`implementation-notes.md`)、进度跟踪 (`progress-tracking.md`) 和集成记录 (`integration-notes.md`) 等。组件层此时大量生成模块文档（如前述 `module-*.md`），确保每个模块的设计、接口、使用示例都有文档说明。通过在开发阶段强化文档跟进，解决了模块耦合和知识分散的问题——所有模块的细节都有据可查，决策与变更记录在案。
- **测试/调试阶段** ：Memory Bank 聚焦质量与问题跟踪。基础层延续开发阶段文档，并新增测试策略 (`testing-strategy.md`) 等指导文档。上下文层则增加测试结果报告 (`test-results.md`)、缺陷列表 (`bug-reports.md`)、性能指标 (`performance-metrics.md`)、质量保证笔记 (`quality-assurance.md`) 等。组件层可能为关键模块生成测试说明文件 (`test-*.md`)。这些文档的引入使测试阶段的工作系统化，每个 Bug 和测试结果都有出处记录，缓解了测试文档混乱的问题。
- **维护/优化阶段** ：聚焦运行维护和反馈。基础层文档精简至核心的维护指南 (`maintenance-guide.md`)、监控配置 (`monitoring-setup.md`) 等。上下文层记录运行过程中的性能日志、用户反馈、优化笔记、事故报告等，帮助团队持续改进。组件层文档保持稳定，仅在模块有改进时更新。通过保存这些维护期文档，项目在长期演进中形成知识积累和沉淀。
- **重构/演进阶段** ：当需要大规模架构升级时，Memory Bank 引入重构计划 (`refactoring-plan.md`)、迁移策略 (`migration-strategy.md`) 等文档指导演进。上下文层详细记录影响分析 (`impact-analysis.md`)、风险评估 (`risk-assessment.md`)、迁移日志 (`migration-log.md`)、兼容性注意事项等。组件层则区分旧架构文档 (`legacy-*.md`) 与新架构文档 (`new-*.md`)，帮助团队管理过渡期的双重结构。这一阶段文档配置确保架构重大调整有据可依，风险与变化受到严格控制。

### memory bank 中的质量控制与压缩优化

- **符号化表达** : 使用 →&|∴∵ 替代冗长词汇
- **YAML 优先** : 结构化数据 > 自然语言
- **客观性检查** : 自动检测并移除主观评价词汇
- **指标禁止** : 阻止生成任何数值指标
- **模块化强制** : 确保每个功能都有对应的模块文档
- **事实记录** : 只记录可验证的事实和变更

## MCP 服务集成

### Context7 后台查询策略

context7_config:

background_query: true # 后台查询编码规范

auto_cache: true # 自动缓存查询结果

silent_mode: true # 不在主对话显示查询过程

### 已安装的 MCP 服务器

- **Context7** (`--c7`): 实时代码文档和库信息，**只可以在 task 内使用**
- **Sequential Thinking** (`--seq`): 多步推理分析
- **Filesystem** : 增强文件系统访问
- **GitHub** : 代码仓库集成

## 项目开发规范

- 测试代码都要放到.scirpt文件夹